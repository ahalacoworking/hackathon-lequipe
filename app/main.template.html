<div>
	<div id="parentView">
		<script type="text/javascript">
            ({
                renderText : function(elm) {
                    this._elm = elm;
                    elm.text('Now :' + new Date());
                },
                renderTitle : function(elm) {
                    var resource = this.getResource();
                    elm.html(resource.properties.title);
                },
                renderDescription : function(elm) {
                    var resource = this.getResource();
                    elm.html(resource.properties.description);
                }
            })
        </script>
	</div>

	<div data-resource-type="Stade" data-view="MapMarkerView">
		<div class="stade-marker"></div>
		<script type="text/javascript">
            ({
                        renderTitle : function(el) {
                            var resource = this.getResource();
                            el.text(resource.properties.title);
                        },
                        icon : {
                            popupAnchor : [ 6, -17 ],
                            iconAnchor: [0, 14]
                        }
                    })
        </script>
	</div>

	<script type="text/javascript" data-map-options="Stade"
		data-extends="#commonOptions">
        {
            color: 'red',
            weight: 0.5
        }
    </script>

	<div data-resource-type="Stade" data-view="MapActivePopupView"
		data-extends="#parentView">
		<div>
			<div class="row">
				<strong class="col-md-12" data-render="renderTitle"></strong>
			</div>
			<div class="row">
				<div class="col-md-12" data-render="renderImage">
					<img class="img-responsive" />
				</div>
			</div>
		</div>

		<script type="text/javascript">
		({
		    popupOptions : {
		        minWidth  : 350,
		        maxWidth : 350,
		    },
		    renderImage : function(elm){
		        var templ = elm.html();
		        elm.html('');  
 		        var resource = this.getResource();
		        var images = resource.properties.stadeInfo.photos;
		        images = _.toArray(images);
		        _.each(images, function(imgInfo){
		            var img = $(templ).attr({
		                src : imgInfo.src
		            })
		            elm.append(img);
		        })
 		    }
		})</script>
	</div>

	<div data-resource-type="Stade" data-view="MapFocusedPopupView"
		data-extends="#parentView">
		<strong data-action-click="sayHello" data-render="renderTitle"></strong>
		<script type="text/javascript">
            ({
                popupOptions : function() {
                    return {
                        offset : [ 0, 0 ],
                        minWidth : 150
                    }
                }
            })
        </script>
	</div>

	<div data-resource-type="CoupDuMonde" data-view="ListItemView"
		data-extends="#parentView">
		<div data-action-click="open">
			<div>
				<strong data-render="renderYear"></strong>
			</div>
			<div data-render="renderImage">
				<img
					style="max-width: 100%; max-height: 80px; width: auto; margin: auto;" />
			</div>
		</div>
		<script type="text/javascript">
            ({
                className: 'year-view',
                open : function(ev){
                    alert('Hello')
                },
                renderImage:  function(elm){
                    var resource = this.getResource();
                    var templ = elm.html();
                    elm.html('');
                    var logo = resource.properties.logo;
                    var src = logo?logo.src:'';
                    var img = $(templ).attr('src', src);
                    elm.html(img);
                },
                renderYear:  function(elm){
                    var resource = this.getResource();
                    elm.text(resource.properties.year);
                }
            })
        </script>
	</div>

</div>